# 3.9: üîß –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª—É

## üîß –©–æ –º–∏ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏?

–£ —Ü—å–æ–º—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ –º–∏ –æ–Ω–æ–≤–∏–º–æ —Ñ–∞–π–ª `main.js` –¥–ª—è –∑'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –Ω–æ–≤–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ —É—Ä–æ–∫—É 3. –¶–µ –æ—Å—Ç–∞–Ω–Ω—ñ–π –∫—Ä–æ–∫ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –±–∞–∑–æ–≤–æ—ó –≥—Ä–∏ –∑ —Ä—É—Ö–æ–º, —Å—Ç—Ä—ñ–ª—å–±–æ—é —Ç–∞ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è–º–∏.

## üéØ –ö–ª—é—á–æ–≤—ñ —Ü—ñ–ª—ñ —É—Ä–æ–∫—É

- üîß **–ó'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤** - –æ–±'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–ª–∞—Å—ñ–≤ –≤ –æ–¥–Ω—É —Å–∏—Å—Ç–µ–º—É
- üéÆ **–°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è** - –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è InputManager –¥–æ –≥—Ä–∞–≤—Ü—è
- üéØ **–ú–µ—Ö–∞–Ω—ñ–∫–∏ —Å—Ç—Ä—ñ–ª—å–±–∏** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–æ–∫ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
- üõ°Ô∏è **–°–∏—Å—Ç–µ–º–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω—å** - –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É Tank
- üìä **–ë–∞–∑–æ–≤–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** - –∑–∞–ø–∏—Å –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø–æ–¥—ñ–π –≥—Ä–∏

## üìù –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ–∞–π–ª—É main.js

–û–Ω–æ–≤—ñ—Ç—å —Ñ–∞–π–ª `main.js`:

```javascript
/**
 * üéÆ –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª –≥—Ä–∏ - –¢–∞–Ω—á–∏–∫–∏
 *
 * –£—Ä–æ–∫ 3: –†—É—Ö —Ç–∞ —Å—Ç—Ä—ñ–ª—å–±–∞
 *
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞:
 * - –ó–∞–ø—É—Å–∫ –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –≥—Ä–∏
 * - –ó–∞–ø—É—Å–∫ —ñ–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª—É
 * - –ö–µ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω–æ–º –≥—Ä–∏
 */

// –û—Ç—Ä–∏–º—É—î–º–æ Canvas —Ç–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

// –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≥—Ä–∏
const GAME_CONFIG = {
  // –†–æ–∑–º—ñ—Ä–∏ Canvas
  CANVAS_WIDTH: 800,
  CANVAS_HEIGHT: 600,

  // –†–æ–∑–º—ñ—Ä —Ç–∞–π–ª–∞
  TILE_SIZE: 32,

  // –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≥—Ä–∏
  GAME_SPEED: 60, // FPS
  DEBUG_MODE: false,
};

// –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–ª–∞—Å–∏
import { Game } from './Game.js';
import { GameLogger } from './GameLogger.js';
import { InputManager } from './InputManager.js';

// –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
let game;
let logger;
let inputManager;

/**
 * –ó–∞–ø—É—Å–∫ –≥—Ä–∏
 */
function initGame() {
  console.log('üéÆ –ó–∞–ø—É—Å–∫ –≥—Ä–∏...');

  // –°—Ç–≤–æ—Ä—é—î–º–æ –ª–æ–≥–µ—Ä
  logger = new GameLogger();

  // –°—Ç–≤–æ—Ä—é—î–º–æ —Å–∏—Å—Ç–µ–º—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è
  inputManager = new InputManager(logger);

  // –°—Ç–≤–æ—Ä—é—î–º–æ –≥—Ä—É
  game = new Game(logger);

  game.init();

  // –ü—ñ–¥–∫–ª—é—á–∞—î–º–æ —Å–∏—Å—Ç–µ–º—É –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–æ –≥—Ä–∞–≤—Ü—è
  game.player.setInputManager(inputManager);

  // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –º–µ–∂—ñ —Ä—É—Ö—É
  game.player.setBounds({
    maxX: GAME_CONFIG.CANVAS_WIDTH,
    maxY: GAME_CONFIG.CANVAS_HEIGHT,
  });

  game.enemy.setBounds({
    maxX: GAME_CONFIG.CANVAS_WIDTH,
    maxY: GAME_CONFIG.CANVAS_HEIGHT,
  });

  // –ù–∞–ª–∞—à—Ç–æ–≤—É—î–º–æ —Å—Ç—Ä—ñ–ª—å–±—É
  game.player.setShootCooldown(500); // 500–º—Å –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
  game.enemy.setShootCooldown(2000); // 2 —Å–µ–∫—É–Ω–¥–∏ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏

  // –ü—Ä–æ—Å–ª—É—Ö–æ–≤—É—î–º–æ –ø–æ–¥—ñ—ó –≥—Ä–∏
  setupGameEvents();

  // –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥—Ä—É
  game.start();

  logger.info('üéÆ –ì—Ä–∞ —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω–∞!');
  logger.info('‚å®Ô∏è –ö–µ—Ä—É–≤–∞–Ω–Ω—è: WASD –¥–ª—è —Ä—É—Ö—É, –ü—Ä–æ–±—ñ–ª –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏, P –¥–ª—è –ø–∞—É–∑–∏');
}

/**
 * –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –≥—Ä–∏
 */
function setupGameEvents() {
  // –ü–æ–¥—ñ—è –ø–∞—É–∑–∏
  document.addEventListener('gamePause', (event) => {
    if (event.detail.isPaused) {
      game.pause();
      logger.warning('‚è∏Ô∏è –ì—Ä–∞ –ø—Ä–∏–∑—É–ø–∏–Ω–µ–Ω–∞');
    } else {
      game.resume();
      logger.info('‚ñ∂Ô∏è –ì—Ä–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–∞');
    }
  });

  // –ü–æ–¥—ñ—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É
  document.addEventListener('gameRestart', () => {
    restartGame();
  });

  // –ü–æ–¥—ñ—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
  document.addEventListener('gameDebug', () => {
    toggleDebugMode();
  });

  // –ü–æ–¥—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏
  document.addEventListener('gameOver', (event) => {
    handleGameOver(event.detail);
  });
}

/**
 * –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≥—Ä–∏
 */
function restartGame() {
  logger.info('üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≥—Ä–∏...');

  // –ó—É–ø–∏–Ω—è—î–º–æ –ø–æ—Ç–æ—á–Ω—É –≥—Ä—É
  if (game) {
    game.stop();
  }

  // –û—á–∏—â–∞—î–º–æ –ª–æ–≥
  logger.clear();

  // –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥—Ä—É –∑–Ω–æ–≤—É
  setTimeout(() => {
    initGame();
  }, 100);
}

/**
 * –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ä–µ–∂–∏–º—É –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
 */
function toggleDebugMode() {
  GAME_CONFIG.DEBUG_MODE = !GAME_CONFIG.DEBUG_MODE;

  if (GAME_CONFIG.DEBUG_MODE) {
    logger.warning('üêõ –†–µ–∂–∏–º –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —É–≤—ñ–º–∫–Ω–µ–Ω–æ');
  } else {
    logger.info('üêõ –†–µ–∂–∏–º –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –≤–∏–º–∫–Ω–µ–Ω–æ');
  }
}

/**
 * –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏
 * @param {Object} gameOverData - –î–∞–Ω—ñ –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏
 */
function handleGameOver(gameOverData) {
  const { winner, reason } = gameOverData;

  logger.warning(`üèÅ –ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! ${reason}`);

  if (winner === 'player') {
    logger.success('üéâ –ì—Ä–∞–≤–µ—Ü—å –ø–µ—Ä–µ–º—ñ–≥!');
  } else if (winner === 'enemy') {
    logger.error('üíÄ –í–æ—Ä–æ–≥ –ø–µ—Ä–µ–º—ñ–≥!');
  }
}

/**
 * –§—É–Ω–∫—Ü—ñ—è –æ—á–∏—â–µ–Ω–Ω—è –ª–æ–≥—É
 */
function clearLog() {
  if (logger) {
    logger.clear();
  }
}

/**
 * –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥—Ä–∏
 * @returns {Object} - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
 */
function getGameStats() {
  if (!game) return null;

  return {
    player: {
      health: game.player.getHealth(),
      maxHealth: game.player.getMaxHealth(),
      bullets: game.player.getBullets().length,
      position: { x: game.player.x, y: game.player.y },
    },
    enemy: {
      health: game.enemy.getHealth(),
      maxHealth: game.enemy.getMaxHealth(),
      bullets: game.enemy.getBullets().length,
      position: { x: game.enemy.x, y: game.enemy.y },
      aiState: game.enemy.getAIState(),
    },
    collisions: game.getCollisionStats(),
    gameTime: game.getGameTime(),
  };
}

// –ï–∫—Å–ø–æ—Ä—Ç—É—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ —ñ–Ω—à–∏—Ö –º–æ–¥—É–ª—è—Ö
export { canvas, ctx, GAME_CONFIG, logger };

// –§—É–Ω–∫—Ü—ñ—è –æ—á–∏—â–µ–Ω–Ω—è –ª–æ–≥—É (–≥–ª–æ–±–∞–ª—å–Ω–∞)
window.clearLog = clearLog;

// –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–≥–ª–æ–±–∞–ª—å–Ω–∞)
window.getGameStats = getGameStats;

// –ó–∞–ø—É—Å–∫–∞—î–º–æ –≥—Ä—É –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è DOM
document.addEventListener('DOMContentLoaded', () => {
  console.log('üöÄ –ó–∞–ø—É—Å–∫ –≥—Ä–∏ –¢–∞–Ω—á–∏–∫–∏ - –£—Ä–æ–∫ 3');
  initGame();
});

// –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
window.addEventListener('error', (event) => {
  console.error('‚ùå –ü–æ–º–∏–ª–∫–∞ –≥—Ä–∏:', event.error);
  if (logger) {
    logger.error(`–ü–æ–º–∏–ª–∫–∞: ${event.error.message}`);
  }
});

// –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
window.addEventListener('beforeunload', () => {
  if (game) {
    game.stop();
  }
  console.log('üëã –ì—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
});
```

## üîÑ –©–æ –æ–Ω–æ–≤–ª–µ–Ω–æ –≤ main.js?

### üì¶ –ù–æ–≤—ñ —ñ–º–ø–æ—Ä—Ç–∏:

- **`InputManager`** - —Å–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–ª–∞–≤—ñ—à–∞–º–∏
- **–û–Ω–æ–≤–ª–µ–Ω—ñ –∫–ª–∞—Å–∏** –∑ –Ω–æ–≤–æ—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é (Tank, Player, Enemy, Game)

### ‚öôÔ∏è –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

- **`setupGameEvents()`** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –≥—Ä–∏ (–ø–∞—É–∑–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫, –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è)
- **`restartGame()`** - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≥—Ä–∏ –∑ –æ—á–∏—â–µ–Ω–Ω—è–º —Å—Ç–∞–Ω—É
- **`toggleDebugMode()`** - –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ä–µ–∂–∏–º—É –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è
- **`handleGameOver()`** - –æ–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏ –∑ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º –ø–µ—Ä–µ–º–æ–∂—Ü—è
- **`getGameStats()`** - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥—Ä–∏

### üéõÔ∏è –ù–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

- **–°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è** –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞ –¥–æ –≥—Ä–∞–≤—Ü—è —á–µ—Ä–µ–∑ `setInputManager()`
- **–ú–µ–∂—ñ —Ä—É—Ö—É** –¥–ª—è –æ–±–æ—Ö —Ç–∞–Ω–∫—ñ–≤ —á–µ—Ä–µ–∑ `setBounds()` (–º–µ—Ç–æ–¥–∏ –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É Tank)
- **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç—Ä—ñ–ª—å–±–∏** —á–µ—Ä–µ–∑ `setShootCooldown()` (–∑–∞—Ç—Ä–∏–º–∫–∏ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏)

## üîó –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –º–µ—Ç–æ–¥—ñ–≤ –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É Tank

### üó∫Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ–∂ —Ä—É—Ö—É:

```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–µ—Ç–æ–¥–∏ –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É Tank
game.player.setBounds({
  maxX: GAME_CONFIG.CANVAS_WIDTH,
  maxY: GAME_CONFIG.CANVAS_HEIGHT,
});

game.enemy.setBounds({
  maxX: GAME_CONFIG.CANVAS_WIDTH,
  maxY: GAME_CONFIG.CANVAS_HEIGHT,
});
```

### üìä –û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:

```javascript
// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –º–µ—Ç–æ–¥–∏ –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É Tank
const playerHealth = game.player.getHealth();
const playerMaxHealth = game.player.getMaxHealth();
const playerBullets = game.player.getBullets().length;
```

## üì° –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π

### üéÆ –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –ø–æ–¥—ñ—ó:

- **`gamePause`** - –ø–∞—É–∑–∞/–ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –≥—Ä–∏ (–∫–ª–∞–≤—ñ—à–∞ P)
- **`gameRestart`** - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≥—Ä–∏ (–∫–ª–∞–≤—ñ—à–∞ R)
- **`gameDebug`** - —Ä–µ–∂–∏–º –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è (–∫–ª–∞–≤—ñ—à–∞ F12)
- **`gameOver`** - –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–º–æ–∑—ñ/–ø–æ—Ä–∞–∑—Ü—ñ)

### ‚ö° –û–±—Ä–æ–±–∫–∞ –ø–æ–¥—ñ–π:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** –≤—Å—ñ—Ö –ø–æ–¥—ñ–π —á–µ—Ä–µ–∑ GameLogger
- **–í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏** —Å—Ç–∞–Ω—É –≥—Ä–∏ (–ø–∞—É–∑–∞, –ø–µ—Ä–µ–º–æ–≥–∞, –ø–æ—Ä–∞–∑–∫–∞)
- **–ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É** –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ñ –≥—Ä–∏
- **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏** –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É

## üåê –ì–ª–æ–±–∞–ª—å–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### üîß –î–æ—Å—Ç—É–ø–Ω—ñ —á–µ—Ä–µ–∑ `window`:

- **`clearLog()`** - –æ—á–∏—â–µ–Ω–Ω—è –ª–æ–≥—É –≥—Ä–∏ (–≤–∏–¥–∞–ª—è—î –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è)
- **`getGameStats()`** - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≥—Ä–∏
- **`restartGame()`** - –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≥—Ä–∏ –∑ –ø–æ—á–∞—Ç–∫–æ–≤–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏

### üñ•Ô∏è –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞:

```javascript
// –û—á–∏—Å—Ç–∏—Ç–∏ –ª–æ–≥ –≥—Ä–∏
clearLog();

// –û—Ç—Ä–∏–º–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω—É —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
const stats = getGameStats();
console.log('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≥—Ä–∏:', stats);

// –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –≥—Ä—É
restartGame();

// –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞–Ω –≥—Ä–∞–≤—Ü—è
const playerStats = getGameStats().player;
console.log('–ó–¥–æ—Ä–æ–≤\'—è –≥—Ä–∞–≤—Ü—è:', playerStats.health);
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—å–æ–≥–æ —Ñ–∞–π–ª—É —É –≤–∞—Å –±—É–¥–µ:

- ‚úÖ **–ë–∞–∑–æ–≤–∞ –≥—Ä–∞** –∑ —Ä—É—Ö–æ–º —Ç–∞ —Å—Ç—Ä—ñ–ª—å–±–æ—é
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è** –∫–ª–∞–≤—ñ—à–∞–º–∏ (WASD + –ü—Ä–æ–±—ñ–ª)
- ‚úÖ **–ë–∞–∑–æ–≤–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –≤–æ—Ä–æ–≥–∞** - –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è —Ç–∞ —Å—Ç—Ä—ñ–ª—å–±–∞
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –∫–æ–ª—ñ–∑—ñ–π** —Ç–∞ –ø–æ—à–∫–æ–¥–∂–µ–Ω—å –∑ —Ñ—ñ–∑–∏–∫–æ—é
- ‚úÖ **–õ–æ–≥—É–≤–∞–Ω–Ω—è** –æ—Å–Ω–æ–≤–Ω–∏—Ö –ø–æ–¥—ñ–π –≥—Ä–∏
- ‚úÖ **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Å–ø—ñ–ª—å–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤** –∑ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É Tank
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—ñ–π** –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ

## üìÅ –§—ñ–Ω–∞–ª—å–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤

```
üìÅ lesson3
‚îú‚îÄ‚îÄ üìÑ index.html          # HTML —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –æ–Ω–æ–≤–ª–µ–Ω–∏–º —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
‚îú‚îÄ‚îÄ üìÑ main.js             # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ InputManager.js     # –°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è (–Ω–æ–≤–∏–π)
‚îú‚îÄ‚îÄ üìÑ Bullet.js           # –ö–ª–∞—Å –∫—É–ª—ñ (–Ω–æ–≤–∏–π)
‚îú‚îÄ‚îÄ üìÑ Player.js           # –ö–ª–∞—Å –≥—Ä–∞–≤—Ü—è (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ Enemy.js            # –ö–ª–∞—Å –≤–æ—Ä–æ–≥–∞ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ Tank.js             # –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å —Ç–∞–Ω–∫–∞ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ GameField.js        # –Ü–≥—Ä–æ–≤–µ –ø–æ–ª–µ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ GameLogger.js       # –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥—É–≤–∞–Ω–Ω—è (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ Game.js             # –ú–æ—Ç–æ—Ä –≥—Ä–∏ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ CollisionManager.js # –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª—ñ–∑—ñ–π (–Ω–æ–≤–∏–π)
‚îú‚îÄ‚îÄ üìÑ styles.css          # –û—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∏–ª—ñ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îú‚îÄ‚îÄ üìÑ variables.css       # CSS –∑–º—ñ–Ω–Ω—ñ (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
‚îî‚îÄ‚îÄ üìÑ colors.js           # –ö–æ–ª—å–æ—Ä–æ–≤–∞ —Å—Ö–µ–º–∞ (–Ω–æ–≤–∏–π)
```

## üöÄ –©–æ –¥–∞–ª—ñ?

**üéâ –í—ñ—Ç–∞—î–º–æ! –í–∏ —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–µ—Ä—à–∏–ª–∏ –£—Ä–æ–∫ 3: –†—É—Ö —Ç–∞ —Å—Ç—Ä—ñ–ª—å–±–∞!**

### üèÜ –©–æ –≤–∏ –¥–æ—Å—è–≥–ª–∏ –≤ –£—Ä–æ—Ü—ñ 3:

- **3.1** - –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ —Ç–∞ HTML —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
- **3.2** - –°–∏—Å—Ç–µ–º–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è InputManager –∑ –æ–±—Ä–æ–±–∫–æ—é –∫–ª–∞–≤—ñ—à
- **3.3** - –ö–ª–∞—Å Bullet –¥–ª—è –∫—É–ª—å –∑ —Ä—É—Ö–æ–º —Ç–∞ –∂–∏—Ç—Ç—î–≤–∏–º —Ü–∏–∫–ª–æ–º
- **3.4** - –†—É—Ö –≥—Ä–∞–≤—Ü—è –∑ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—î—é InputManager
- **3.5** - –°—Ç—Ä—ñ–ª—å–±–∞ –≥—Ä–∞–≤—Ü—è –∑ –∑–∞—Ç—Ä–∏–º–∫–∞–º–∏ —Ç–∞ –∂–∏—Ç—Ç—è–º–∏
- **3.6** - –ë–∞–∑–æ–≤–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –≤–æ—Ä–æ–≥–∞ –∑ –ø–∞—Ç—Ä—É–ª—é–≤–∞–Ω–Ω—è–º
- **3.7** - –°—Ç—Ä—ñ–ª—å–±–∞ –≤–æ—Ä–æ–≥–∞ –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º–∏ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
- **3.8** - –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª—ñ–∑—ñ–π CollisionManager –∑ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è–º–∏
- **3.9** - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤—Å—ñ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ –≤ main.js

### üéØ –£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ –¥–æ–¥–∞–º–æ:

- ‚úÖ **–í–∏–±—É—Ö–∏ —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó** - –≤—ñ–∑—É–∞–ª—å–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–∞–º–∏
- ‚úÖ **–ó–≤—É–∫–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏** - –∞—É–¥—ñ–æ —Å—É–ø—Ä–æ–≤—ñ–¥
- ‚úÖ **–ü–æ–∫—Ä–∞—â–µ–Ω—ñ –ø—Ä–∏–º—ñ—Ç–∏–≤–∏** - –∫–æ–ª—å–æ—Ä–æ–≤—ñ –µ—Ñ–µ–∫—Ç–∏ —Ç–∞ –≥–µ–æ–º–µ—Ç—Ä—ñ—è
- ‚úÖ **–î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ** - –±–æ–Ω—É—Å–∏ —Ç–∞ power-ups

### üé® –°–ø—Ä–∞–π—Ç–∏ —Ç–∞ —Ç–µ–∫—Å—Ç—É—Ä–∏:

–ë—É–¥—É—Ç—å –¥–æ–¥–∞–Ω—ñ –≤ **–±–æ–Ω—É—Å–Ω–æ–º—É –æ—Å—Ç–∞–Ω–Ω—å–æ–º—É —É—Ä–æ—Ü—ñ** –¥–ª—è –ø–æ–≤–Ω–æ—ó —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≥—Ä–∞—Ñ—ñ–∫–∏.

### üéÆ –°–ø—Ä–æ–±—É–π—Ç–µ –≥—Ä—É –∑–∞—Ä–∞–∑:

[–ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –¢–£–¢ —è–∫ –º–∞—î –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–≤—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç](/battle_city_js_course/tatu/index.html){target="_blank"}
