# 2.3: –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–∞–Ω–∫ –≥—Ä–∞–≤—Ü—è! üéÆ

## –©–æ –º–∏ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ? üöÄ

–£ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –∫–ª–∞—Å `Player.js`, —è–∫–∏–π —É—Å–ø–∞–¥–∫–æ–≤—É–≤–∞—Ç–∏–º–µ –≤—ñ–¥ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É —Ç–∞–Ω–∫–∞ —Ç–∞ –¥–æ–¥–∞—Å—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É –¥–ª—è –≥—Ä–∞–≤—Ü—è.

<img src="/battle_city_js_course/player.png" />

–¶–µ–π —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –≤—Å—ñ –∫–æ–ª—å–æ—Ä–∏ –∑ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ—ó –ø–∞–ª—ñ—Ç—Ä–∏ Battle City NES. –¢–µ–ø–µ—Ä –º–∏ –º–æ–∂–µ–º–æ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —ó—Ö —É –≤—Å—ñ—Ö –Ω–∞—à–∏—Ö –∫–ª–∞—Å–∞—Ö!

## üé® –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—É Player.js

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `Player.js`:

```javascript
import { Tank } from './Tank.js';
import { yellow, orange } from './colors.js';

/**
 * üéÆ –ö–ª–∞—Å Player - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –≥—Ä–∞–≤—Ü—è
 * 
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞:
 * - –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É –ª–æ–≥—ñ–∫—É –≥—Ä–∞–≤—Ü—è
 * - –ö–µ—Ä—É–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü–µ–º
 */

export class Player extends Tank {
    constructor(options = {}, logger) {
        // –í–∏–∫–ª–∏–∫–∞—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–ª–∞—Å—É Tank
        super({
            ...options, // –ø–µ—Ä–µ–¥–∞—î–º–æ –≤—Å—ñ –æ–ø—Ü—ñ—ó –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–º—É –∫–ª–∞—Å—É
            // –∂–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
            color: options.color || yellow,
            // –≥—Ä–∞–≤–µ—Ü—å —Ä—É—Ö–∞—î—Ç—å—Å—è —à–≤–∏–¥—à–µ –∑–∞ –≤–æ—Ä–æ–≥–∞
            speed: options.speed || 2,
            // –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –Ω–∞–ø—Ä—è–º–æ–∫ –¥—É–ª–∞ –≤–≥–æ—Ä—É
            direction: options.direction || 'up'
        }, logger);
        
        // –õ–æ–≥–≥–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ–¥—ñ–π –≥—Ä–∞–≤—Ü—è
        this.logger = logger;
        
        // –∑–∞–ø–∏—Å—É—î–º–æ –≤ –ª–æ–≥
        this.logger.playerAction('–ì—Ä–∞–≤–µ—Ü—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π', `–ø–æ–∑–∏—Ü—ñ—è: (${this.x}, ${this.y})`);
    }
    
    /**
     * –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –≥—Ä–∞–≤—Ü—è
     * @param {number} deltaTime - –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
     */
    update(deltaTime) {
        // –ü–æ–∫–∏ —â–æ –ø—Ä–æ—Å—Ç–æ –æ–Ω–æ–≤–ª—é—î–º–æ —á–∞—Å
        // –í –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —É—Ä–æ–∫–∞—Ö —Ç—É—Ç –±—É–¥–µ –ª–æ–≥—ñ–∫–∞ —Ä—É—Ö—É –∑–∞ –∫–ª–∞–≤—ñ—à–∞–º–∏
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
     * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
     */
    render(ctx) {
        // —è–∫—â–æ –≥—Ä–∞–≤–µ—Ü—å –º–µ—Ä—Ç–≤–∏–π, –Ω–µ –º–∞–ª—é—î–º–æ
        if (!this.isAlive) return;
        
        // –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
        ctx.save();
        
        // –≤–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ render –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–ª–∞—Å—É
        super.render(ctx);
        
        // –º–∞–ª—é—î–º–æ –∂–æ–≤—Ç–∏–π –∫—Ä—É–≥
        this.drawPlayerMark(ctx);
        
        // –≤—ñ–¥–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
        ctx.restore();
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è –ø–æ–∑–Ω–∞—á–∫–∏ –≥—Ä–∞–≤—Ü—è (–∂–æ–≤—Ç–∏–π –∫—Ä—É–≥)
     * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
     */
    drawPlayerMark(ctx) {
        // —Ä–æ–∑–º—ñ—Ä –ø–æ–∑–Ω–∞—á–∫–∏ –≤ –ø—ñ–∫—Å–µ–ª—è—Ö
        const markSize = 4;
        // —Ü–µ–Ω—Ç—Ä —Ç–∞–Ω–∫–∞ –ø–æ X
        const centerX = this.x + this.width / 2;
        // —Ü–µ–Ω—Ç—Ä —Ç–∞–Ω–∫–∞ –ø–æ Y
        const centerY = this.y + this.height / 2;
        
        // –ø–æ–º–∞—Ä–∞–Ω—á–µ–≤–æ-–∂–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä
        ctx.fillStyle = orange;
        // –ø–æ—á–∏–Ω–∞—î–º–æ –º–∞–ª—é–≤–∞—Ç–∏ —à–ª—è—Ö
        ctx.beginPath();
        // –º–∞–ª—é—î–º–æ –∫–æ–ª–æ
        ctx.arc(centerX, centerY, markSize, 0, 2 * Math.PI);
        // –∑–∞–ø–æ–≤–Ω—é—î–º–æ –∫–æ–ª–æ –∫–æ–ª—å–æ—Ä–æ–º
        ctx.fill();
    }
}
```

## üéØ –©–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –∫–ª–∞—Å?

### –£—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥ Tank:
- **–ù–∞—Å–ª—ñ–¥—É—î –≤—Å—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ** –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É —Ç–∞–Ω–∫–∞
- **–ü–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î –¥–µ—è–∫—ñ –º–µ—Ç–æ–¥–∏** –¥–ª—è —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –≥—Ä–∞–≤—Ü—è

### –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≥—Ä–∞–≤—Ü—è:
- **–ö–æ–ª—ñ—Ä**: –∂–æ–≤—Ç–∏–π (`#f1c40f`) –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: 2 (—à–≤–∏–¥—à–µ –∑–∞ –≤–æ—Ä–æ–≥–∞)
- **–ù–∞–ø—Ä—è–º–æ–∫**: –≤–≥–æ—Ä—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–µ—Ç–æ–¥–∏:
- **`drawPlayerMark(ctx)`** - –º–∞–ª—é—î –∂–æ–≤—Ç–∏–π –∫—Ä—É–≥ –≤ —Ü–µ–Ω—Ç—Ä—ñ —Ç–∞–Ω–∫–∞ –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≥—Ä–∞–≤—Ü—è

### –õ–æ–≥—É–≤–∞–Ω–Ω—è:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∑ –ø–æ–∑–∏—Ü—ñ—î—é
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `this.logger.playerAction()`** –¥–ª—è –∑–∞–ø–∏—Å—É –¥—ñ–π –≥—Ä–∞–≤—Ü—è

## üé® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –º–∞–ª—é–≤–∞–Ω–Ω—è

### –ü–æ–∑–Ω–∞—á–∫–∞ –≥—Ä–∞–≤—Ü—è:
- **–ñ–æ–≤—Ç–∏–π –∫—Ä—É–≥** –≤ —Ü–µ–Ω—Ç—Ä—ñ —Ç–∞–Ω–∫–∞
- **–†–æ–∑–º—ñ—Ä**: 4 –ø—ñ–∫—Å–µ–ª—ñ
- **–ö–æ–ª—ñ—Ä**: –ø–æ–º–∞—Ä–∞–Ω—á–µ–≤–æ-–∂–æ–≤—Ç–∏–π (`#f39c12`)

### –ü–æ—Ä—è–¥–æ–∫ –º–∞–ª—é–≤–∞–Ω–Ω—è:
1. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** (`ctx.save()`)
2. **–ú–∞–ª—é–≤–∞–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ —Ç–∞–Ω–∫–∞** (`super.render(ctx)`)
3. **–ú–∞–ª—é–≤–∞–Ω–Ω—è –ø–æ–∑–Ω–∞—á–∫–∏ –≥—Ä–∞–≤—Ü—è** (`drawPlayerMark(ctx)`)
4. **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** (`ctx.restore()`)

## üéÆ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```javascript
// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∑ –ª–æ–≥–≥–µ—Ä–æ–º
const player = new Player({
    x: 100,           // –ø–æ–∑–∏—Ü—ñ—è X
    y: 100,           // –ø–æ–∑–∏—Ü—ñ—è Y
    color: '#f1c40f', // –∂–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä
    size: 32          // —Ä–æ–∑–º—ñ—Ä —Ç–∞–Ω–∫–∞
}, logger); // –ø–µ—Ä–µ–¥–∞—î–º–æ –ª–æ–≥–≥–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ–¥—ñ–π

// –ú–∞–ª—é–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è
player.render(ctx);
```

## üìù –ü–∞—Ä–∞–º–µ—Ç—Ä logger

**`logger`** - —Ü–µ –æ–±'—î–∫—Ç —Å–∏—Å—Ç–µ–º–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è, —è–∫–∏–π –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ–¥—ñ–π –≥—Ä–∞–≤—Ü—è:

- **–¢–∏–ø**: `GameLogger` –∞–±–æ `null`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ó–∞–ø–∏—Å –ø–æ–¥—ñ–π, –¥—ñ–π —Ç–∞ —Å—Ç–∞–Ω—É –≥—Ä–∞–≤—Ü—è
- **–ú–µ—Ç–æ–¥–∏**:
  - `playerAction(message, details)` - –∑–∞–ø–∏—Å –¥—ñ–π –≥—Ä–∞–≤—Ü—è
  - `gameEvent(message, details)` - –∑–∞–ø–∏—Å —ñ–≥—Ä–æ–≤–∏—Ö –ø–æ–¥—ñ–π
  - `info(message, details)` - —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  - `warning(message, details)` - –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
  - `error(message, details)` - –ø–æ–º–∏–ª–∫–∏

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:
```javascript
// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª–æ–≥–≥–µ—Ä–∞
const logger = new GameLogger();

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∑ –ª–æ–≥–≥–µ—Ä–æ–º
const player = new Player({
    x: 100,
    y: 100
}, logger);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è
// logger.playerAction('–ì—Ä–∞–≤–µ—Ü—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π', '–ø–æ–∑–∏—Ü—ñ—è: (100, 100)')
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ü—å–æ–≥–æ –∫–ª–∞—Å—É —É —Ç–µ–±–µ –±—É–¥–µ:
- ‚úÖ –ö–ª–∞—Å –≥—Ä–∞–≤—Ü—è –∑ –∂–æ–≤—Ç–∏–º –∫–æ–ª—å–æ—Ä–æ–º
- ‚úÖ –ü–æ–∑–Ω–∞—á–∫–∞ –≥—Ä–∞–≤—Ü—è (–∂–æ–≤—Ç–∏–π –∫—Ä—É–≥)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥—ñ–π
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è

## üöÄ –©–æ –¥–∞–ª—ñ?

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –∫–ª–∞—Å –≤–æ—Ä–æ–∂–æ–≥–æ —Ç–∞–Ω–∫–∞ –∑ —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ —Ö—Ä–µ—Å—Ç–∏–∫–æ–º.

**–¢–∏ –º–æ–ª–æ–¥–µ—Ü—å! üåü –ü—Ä–æ–¥–æ–≤–∂—É–π –≤ —Ç–æ–º—É –∂ –¥—É—Å—ñ!** 

