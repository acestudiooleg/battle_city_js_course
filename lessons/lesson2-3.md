# 2.3: –¢–∞–Ω–∫ –≥—Ä–∞–≤—Ü—è

## –©–æ –º–∏ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏?

–£ —Ü—å–æ–º—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –∫–ª–∞—Å `Player.js`, —è–∫–∏–π —É—Å–ø–∞–¥–∫–æ–≤—É–≤–∞—Ç–∏–º–µ –≤—ñ–¥ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É —Ç–∞–Ω–∫–∞ —Ç–∞ –¥–æ–¥–∞—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É –ª–æ–≥—ñ–∫—É –¥–ª—è –≥—Ä–∞–≤—Ü—è.

## –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—É Player.js

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `Player.js`:

```javascript
import { Tank } from './Tank.js';
import { logger } from './main.js';

/**
 * üéÆ –ö–ª–∞—Å Player - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –≥—Ä–∞–≤—Ü—è
 * 
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞:
 * - –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É –ª–æ–≥—ñ–∫—É –≥—Ä–∞–≤—Ü—è
 * - –ö–µ—Ä—É–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü–µ–º
 */

export class Player extends Tank {
    constructor(options = {}) {
        // –í–∏–∫–ª–∏–∫–∞—î–º–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–ª–∞—Å—É Tank
        super({
            ...options, // –ø–µ—Ä–µ–¥–∞—î–º–æ –≤—Å—ñ –æ–ø—Ü—ñ—ó –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–º—É –∫–ª–∞—Å—É
            // –∂–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
            color: options.color || '#f1c40f',
            // –≥—Ä–∞–≤–µ—Ü—å —Ä—É—Ö–∞—î—Ç—å—Å—è —à–≤–∏–¥—à–µ –∑–∞ –≤–æ—Ä–æ–≥–∞
            speed: options.speed || 2,
            // –ø–æ—á–∞—Ç–∫–æ–≤–∏–π –Ω–∞–ø—Ä—è–º–æ–∫ –¥—É–ª–∞ –≤–≥–æ—Ä—É
            direction: options.direction || 'up'
        });
        
        // –∑–∞–ø–∏—Å—É—î–º–æ –≤ –ª–æ–≥
        logger.playerAction('–ì—Ä–∞–≤–µ—Ü—å —Å—Ç–≤–æ—Ä–µ–Ω–∏–π', `–ø–æ–∑–∏—Ü—ñ—è: (${this.x}, ${this.y})`);
    }
    
    /**
     * –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –≥—Ä–∞–≤—Ü—è
     * @param {number} deltaTime - –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
     */
    update(deltaTime) {
        // –ü–æ–∫–∏ —â–æ –ø—Ä–æ—Å—Ç–æ –æ–Ω–æ–≤–ª—é—î–º–æ —á–∞—Å (–ø–æ—Ä–æ–∂–Ω—è —Ñ—É–Ω–∫—Ü—ñ—è)
        // –í –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —É—Ä–æ–∫–∞—Ö —Ç—É—Ç –±—É–¥–µ –ª–æ–≥—ñ–∫–∞ —Ä—É—Ö—É –∑–∞ –∫–ª–∞–≤—ñ—à–∞–º–∏
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
     * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
     */
    render(ctx) {
        // —è–∫—â–æ –≥—Ä–∞–≤–µ—Ü—å –º–µ—Ä—Ç–≤–∏–π, –Ω–µ –º–∞–ª—é—î–º–æ
        if (!this.isAlive) return;
        
        // –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–∫–æ–ª—ñ—Ä, —Å—Ç–∏–ª—å —Ç–æ—â–æ)
        ctx.save();
        
        // –≤–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ render –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–ª–∞—Å—É
        super.render(ctx);
        
        // –º–∞–ª—é—î–º–æ –∂–æ–≤—Ç–∏–π –∫—Ä—É–≥
        this.drawPlayerMark(ctx);
        
        // –≤—ñ–¥–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
        ctx.restore();
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è –ø–æ–∑–Ω–∞—á–∫–∏ –≥—Ä–∞–≤—Ü—è (–∂–æ–≤—Ç–∏–π –∫—Ä—É–≥)
     * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
     */
    drawPlayerMark(ctx) {
        // —Ä–æ–∑–º—ñ—Ä –ø–æ–∑–Ω–∞—á–∫–∏ –≤ –ø—ñ–∫—Å–µ–ª—è—Ö
        const markSize = 4;
        // —Ü–µ–Ω—Ç—Ä —Ç–∞–Ω–∫–∞ –ø–æ X
        const centerX = this.x + this.width / 2;
        // —Ü–µ–Ω—Ç—Ä —Ç–∞–Ω–∫–∞ –ø–æ Y
        const centerY = this.y + this.height / 2;
        
        // –ø–æ–º–∞—Ä–∞–Ω—á–µ–≤–æ-–∂–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä
        ctx.fillStyle = '#f39c12';
        // –ø–æ—á–∏–Ω–∞—î–º–æ –º–∞–ª—é–≤–∞—Ç–∏ —à–ª—è—Ö
        ctx.beginPath();
        // –º–∞–ª—é—î–º–æ –∫–æ–ª–æ
        ctx.arc(centerX, centerY, markSize, 0, 2 * Math.PI);
        // –∑–∞–ø–æ–≤–Ω—é—î–º–æ –∫–æ–ª–æ –∫–æ–ª—å–æ—Ä–æ–º
        ctx.fill();
    }
}
```

## –©–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –∫–ª–∞—Å?

### –£—Å–ø–∞–¥–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥ Tank:
- **–ù–∞—Å–ª—ñ–¥—É—î –≤—Å—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ** –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É —Ç–∞–Ω–∫–∞
- **–ü–µ—Ä–µ–≤–∏–∑–Ω–∞—á–∞—î –¥–µ—è–∫—ñ –º–µ—Ç–æ–¥–∏** –¥–ª—è —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–æ—ó –ø–æ–≤–µ–¥—ñ–Ω–∫–∏ –≥—Ä–∞–≤—Ü—è

### –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≥—Ä–∞–≤—Ü—è:
- **–ö–æ–ª—ñ—Ä**: –∂–æ–≤—Ç–∏–π (`#f1c40f`) –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
- **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: 2 (—à–≤–∏–¥—à–µ –∑–∞ –≤–æ—Ä–æ–≥–∞)
- **–ù–∞–ø—Ä—è–º–æ–∫**: –≤–≥–æ—Ä—É –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

### –î–æ–¥–∞—Ç–∫–æ–≤—ñ –º–µ—Ç–æ–¥–∏:
- **`drawPlayerMark(ctx)`** - –º–∞–ª—é—î –∂–æ–≤—Ç–∏–π –∫—Ä—É–≥ –≤ —Ü–µ–Ω—Ç—Ä—ñ —Ç–∞–Ω–∫–∞ –¥–ª—è —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≥—Ä–∞–≤—Ü—è

### –õ–æ–≥—É–≤–∞–Ω–Ω—è:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è –∑ –ø–æ–∑–∏—Ü—ñ—î—é
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `logger.playerAction()`** –¥–ª—è –∑–∞–ø–∏—Å—É –¥—ñ–π –≥—Ä–∞–≤—Ü—è

## –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –º–∞–ª—é–≤–∞–Ω–Ω—è

### –ü–æ–∑–Ω–∞—á–∫–∞ –≥—Ä–∞–≤—Ü—è:
- **–ñ–æ–≤—Ç–∏–π –∫—Ä—É–≥** –≤ —Ü–µ–Ω—Ç—Ä—ñ —Ç–∞–Ω–∫–∞
- **–†–æ–∑–º—ñ—Ä**: 4 –ø—ñ–∫—Å–µ–ª—ñ
- **–ö–æ–ª—ñ—Ä**: –ø–æ–º–∞—Ä–∞–Ω—á–µ–≤–æ-–∂–æ–≤—Ç–∏–π (`#f39c12`)

### –ü–æ—Ä—è–¥–æ–∫ –º–∞–ª—é–≤–∞–Ω–Ω—è:
1. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** (`ctx.save()`)
2. **–ú–∞–ª—é–≤–∞–Ω–Ω—è –±–∞–∑–æ–≤–æ–≥–æ —Ç–∞–Ω–∫–∞** (`super.render(ctx)`)
3. **–ú–∞–ª—é–≤–∞–Ω–Ω—è –ø–æ–∑–Ω–∞—á–∫–∏ –≥—Ä–∞–≤—Ü—è** (`drawPlayerMark(ctx)`)
4. **–í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** (`ctx.restore()`)

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```javascript
// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞–≤—Ü—è
const player = new Player({
    x: 100,           // –ø–æ–∑–∏—Ü—ñ—è X
    y: 100,           // –ø–æ–∑–∏—Ü—ñ—è Y
    color: '#f1c40f', // –∂–æ–≤—Ç–∏–π –∫–æ–ª—ñ—Ä
    size: 32          // —Ä–æ–∑–º—ñ—Ä —Ç–∞–Ω–∫–∞
});

// –ú–∞–ª—é–≤–∞–Ω–Ω—è –≥—Ä–∞–≤—Ü—è
player.render(ctx);
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ü—å–æ–≥–æ –∫–ª–∞—Å—É —É –≤–∞—Å –±—É–¥–µ:
- ‚úÖ –ö–ª–∞—Å –≥—Ä–∞–≤—Ü—è –∑ –∂–æ–≤—Ç–∏–º –∫–æ–ª—å–æ—Ä–æ–º
- ‚úÖ –ü–æ–∑–Ω–∞—á–∫–∞ –≥—Ä–∞–≤—Ü—è (–∂–æ–≤—Ç–∏–π –∫—Ä—É–≥)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥—ñ–π
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è

## –©–æ –¥–∞–ª—ñ?

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –∫–ª–∞—Å –≤–æ—Ä–æ–∂–æ–≥–æ —Ç–∞–Ω–∫–∞ –∑ —á–µ—Ä–≤–æ–Ω–∏–º –∫–æ–ª—å–æ—Ä–æ–º —Ç–∞ —Ö—Ä–µ—Å—Ç–∏–∫–æ–º. 