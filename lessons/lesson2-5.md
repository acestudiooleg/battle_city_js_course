# 2.5: –°—Ç–≤–æ—Ä—é—î–º–æ —ñ–≥—Ä–æ–≤–µ –ø–æ–ª–µ! üéÆ

## –©–æ –º–∏ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏ —Å—å–æ–≥–æ–¥–Ω—ñ? üöÄ

–£ —Ü—å–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –∫–ª–∞—Å `GameField.js`, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –∑–∞ –º–∞–ª—é–≤–∞–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è, —Å—ñ—Ç–∫–∏ —Ç–∞ —Ñ–æ–Ω—É.

<img src="../public/gamefield.png" />

## üé® –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—É GameField.js

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `GameField.js`:

```javascript
import { darkGreen, green } from './colors.js';

/**
 * üéÆ –ö–ª–∞—Å GameField - –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î —ñ–≥—Ä–æ–≤–µ –ø–æ–ª–µ
 * 
 * –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞:
 * - –ú–∞–ª—é–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏ –ø–æ–ª—è
 * - –§–æ–Ω —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
 * - –†–æ–∑–º—ñ—Ç–∫—É –∫–ª—ñ—Ç–∏–Ω–æ–∫
 */

export class GameField {
    constructor(ctx, config, logger) {
        // –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
        this.ctx = ctx;
        // –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≥—Ä–∏
        this.config = config;
        // —Ä–æ–∑–º—ñ—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏
        this.tileSize = config.TILE_SIZE;
        // –ª–æ–≥–≥–µ—Ä –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ–¥—ñ–π
        this.logger = logger;
        
        // –∑–∞–ø–∏—Å—É—î–º–æ –≤ –ª–æ–≥
        this.logger.gameEvent('–Ü–≥—Ä–æ–≤–µ –ø–æ–ª–µ —Å—Ç–≤–æ—Ä–µ–Ω–µ');
    }
    
    /**
     * –û–Ω–æ–≤–ª–µ–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
     * @param {number} deltaTime - –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
     */
    update(deltaTime) {
        // –ü–æ–∫–∏ —â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –æ–Ω–æ–≤–ª—é—î–º–æ
        // –í –º–∞–π–±—É—Ç–Ω—å–æ–º—É —Ç—É—Ç –º–æ–∂–µ –±—É—Ç–∏ –∞–Ω—ñ–º–∞—Ü—ñ—è —Ñ–æ–Ω—É
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
     */
    render() {
        // –º–∞–ª—é—î–º–æ —Ñ–æ–Ω –ø–æ–ª—è
        this.drawBackground();
        // –º–∞–ª—é—î–º–æ —Å—ñ—Ç–∫—É –ø–æ–ª—è
        this.drawGrid();
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è —Ñ–æ–Ω—É –ø–æ–ª—è
     */
    drawBackground() {
        // –ú–∞–ª—é—î–º–æ —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω–∏–π —Ñ–æ–Ω
        // —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è —Ñ–æ–Ω—É
        this.ctx.fillStyle = darkGreen;
        // –∑–∞–ø–æ–≤–Ω—é—î–º–æ –≤–µ—Å—å Canvas
        this.ctx.fillRect(0, 0, this.config.CANVAS_WIDTH, this.config.CANVAS_HEIGHT);
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏ –ø–æ–ª—è
     */
    drawGrid() {
        // —Å–≤—ñ—Ç–ª–æ-–∑–µ–ª–µ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è –ª—ñ–Ω—ñ–π —Å—ñ—Ç–∫–∏
        this.ctx.strokeStyle = green;
        // —Ç–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π —Å—ñ—Ç–∫–∏
        this.ctx.lineWidth = 1;
        
        // –ø—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –≤—Å—ñ–π —à–∏—Ä–∏–Ω—ñ –∑ –∫—Ä–æ–∫–æ–º tileSize
        for (let x = 0; x <= this.config.CANVAS_WIDTH; x += this.tileSize) {
            // –ø–æ—á–∏–Ω–∞—î–º–æ –º–∞–ª—é–≤–∞—Ç–∏ —à–ª—è—Ö
            this.ctx.beginPath();
            // –ø–æ—á–∞—Ç–∫–æ–≤–∞ —Ç–æ—á–∫–∞ (–≤–µ—Ä—Ö)
            this.ctx.moveTo(x, 0);
            // –∫—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞ (–Ω–∏–∑)
            this.ctx.lineTo(x, this.config.CANVAS_HEIGHT);
            // –º–∞–ª—é—î–º–æ –ª—ñ–Ω—ñ—é
            this.ctx.stroke();
        }
        
        // –ø—Ä–æ—Ö–æ–¥–∏–º–æ –ø–æ –≤—Å—ñ–π –≤–∏—Å–æ—Ç—ñ –∑ –∫—Ä–æ–∫–æ–º tileSize
        for (let y = 0; y <= this.config.CANVAS_HEIGHT; y += this.tileSize) {
            // –ø–æ—á–∏–Ω–∞—î–º–æ –º–∞–ª—é–≤–∞—Ç–∏ —à–ª—è—Ö
            this.ctx.beginPath();
            // –ø–æ—á–∞—Ç–∫–æ–≤–∞ —Ç–æ—á–∫–∞ (–ª—ñ–≤–æ)
            this.ctx.moveTo(0, y);
            // –∫—ñ–Ω—Ü–µ–≤–∞ —Ç–æ—á–∫–∞ (–ø—Ä–∞–≤–æ)
            this.ctx.lineTo(this.config.CANVAS_WIDTH, y);
            // –º–∞–ª—é—î–º–æ –ª—ñ–Ω—ñ—é
            this.ctx.stroke();
        }
    }
}
```

## üéØ –©–æ —Ä–æ–±–∏—Ç—å —Ü–µ–π –∫–ª–∞—Å?

### –û—Å–Ω–æ–≤–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:
- **`ctx`** - –∫–æ–Ω—Ç–µ–∫—Å—Ç Canvas –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
- **`config`** - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≥—Ä–∏ (—Ä–æ–∑–º—ñ—Ä–∏, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
- **`tileSize`** - —Ä–æ–∑–º—ñ—Ä –æ–¥–Ω—ñ—î—ó –∫–ª—ñ—Ç–∏–Ω–∫–∏ —Å—ñ—Ç–∫–∏

### –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏:
- **`update(deltaTime)`** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –ø–æ–ª—è
- **`render()`** - –º–∞–ª—é–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ –ø–æ–ª—è
- **`drawBackground()`** - –º–∞–ª—é–≤–∞–Ω–Ω—è —Ñ–æ–Ω—É
- **`drawGrid()`** - –º–∞–ª—é–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏

## üé® –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ –º–∞–ª—é–≤–∞–Ω–Ω—è

### –§–æ–Ω –ø–æ–ª—è:
- **–ö–æ–ª—ñ—Ä**: —Ç–µ–º–Ω–æ-–∑–µ–ª–µ–Ω–∏–π (`#2d5016`)
- **–†–æ–∑–º—ñ—Ä**: –ø–æ–≤–Ω–∏–π Canvas (800x600 –ø—ñ–∫—Å–µ–ª—ñ–≤)
- **–ú–µ—Ç–æ–¥**: `fillRect()` –¥–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä—è–º–æ–∫—É—Ç–Ω–∏–∫–∞

### –°—ñ—Ç–∫–∞ –ø–æ–ª—è:
- **–ö–æ–ª—ñ—Ä –ª—ñ–Ω—ñ–π**: —Å–≤—ñ—Ç–ª–æ-–∑–µ–ª–µ–Ω–∏–π (`#3a5f1e`)
- **–¢–æ–≤—â–∏–Ω–∞ –ª—ñ–Ω—ñ–π**: 1 –ø—ñ–∫—Å–µ–ª—å
- **–†–æ–∑–º—ñ—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏**: 32x32 –ø—ñ–∫—Å–µ–ª—ñ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)

### –ê–ª–≥–æ—Ä–∏—Ç–º –º–∞–ª—é–≤–∞–Ω–Ω—è —Å—ñ—Ç–∫–∏:
1. **–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ –ª—ñ–Ω—ñ—ó**: –≤—ñ–¥ 0 –¥–æ —à–∏—Ä–∏–Ω–∏ Canvas –∑ –∫—Ä–æ–∫–æ–º `tileSize`
2. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ñ –ª—ñ–Ω—ñ—ó**: –≤—ñ–¥ 0 –¥–æ –≤–∏—Å–æ—Ç–∏ Canvas –∑ –∫—Ä–æ–∫–æ–º `tileSize`

## üìê –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—ñ—Ç–∫–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ  ‚Üê 32px
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
    ‚Üë
  32px
```

### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∫–ª—ñ—Ç–∏–Ω–æ–∫:
- **–ü–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ**: 800 √∑ 32 = 25 –∫–ª—ñ—Ç–∏–Ω–æ–∫
- **–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª—ñ**: 600 √∑ 32 = 18.75 –∫–ª—ñ—Ç–∏–Ω–æ–∫ (18 –ø–æ–≤–Ω–∏—Ö)

## üéÆ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```javascript
// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –∑ –ª–æ–≥–≥–µ—Ä–æ–º
const gameField = new GameField(ctx, GAME_CONFIG, logger);

// –ú–∞–ª—é–≤–∞–Ω–Ω—è –ø–æ–ª—è
gameField.render();

// –û–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–æ–ª—è (–≤ —ñ–≥—Ä–æ–≤–æ–º—É —Ü–∏–∫–ª—ñ)
gameField.update(deltaTime);
```

## üìù –ü–∞—Ä–∞–º–µ—Ç—Ä logger

**`logger`** - —Ü–µ –æ–±'—î–∫—Ç —Å–∏—Å—Ç–µ–º–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è, —è–∫–∏–π –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ–¥—ñ–π —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è:

- **–¢–∏–ø**: `GameLogger` –∞–±–æ `null`
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ó–∞–ø–∏—Å –ø–æ–¥—ñ–π —Ç–∞ —Å—Ç–∞–Ω—É —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
- **–ú–µ—Ç–æ–¥–∏**:
  - `gameEvent(message, details)` - –∑–∞–ø–∏—Å —ñ–≥—Ä–æ–≤–∏—Ö –ø–æ–¥—ñ–π
  - `info(message, details)` - —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ–π–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  - `warning(message, details)` - –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è
  - `error(message, details)` - –ø–æ–º–∏–ª–∫–∏

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:
```javascript
// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ª–æ–≥–≥–µ—Ä–∞
const logger = new GameLogger();

// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –∑ –ª–æ–≥–≥–µ—Ä–æ–º
const gameField = new GameField(ctx, GAME_CONFIG, logger);

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–ª—è
// logger.gameEvent('–Ü–≥—Ä–æ–≤–µ –ø–æ–ª–µ —Å—Ç–≤–æ—Ä–µ–Ω–µ')
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ö–ª–∞—Å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é –∑ `GAME_CONFIG`:

```javascript
const GAME_CONFIG = {
    CANVAS_WIDTH: 800,   // —à–∏—Ä–∏–Ω–∞ Canvas
    CANVAS_HEIGHT: 600,  // –≤–∏—Å–æ—Ç–∞ Canvas
    TILE_SIZE: 32        // —Ä–æ–∑–º—ñ—Ä –∫–ª—ñ—Ç–∏–Ω–∫–∏
};
```

## üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è** —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `logger.gameEvent()`** –¥–ª—è –∑–∞–ø–∏—Å—É –ø–æ–¥—ñ–π –ø–æ–ª—è

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ü—å–æ–≥–æ –∫–ª–∞—Å—É —É —Ç–µ–±–µ –±—É–¥–µ:
- ‚úÖ –¢–µ–º–Ω–æ-–∑–µ–ª–µ–Ω–∏–π —Ñ–æ–Ω —ñ–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
- ‚úÖ –°—ñ—Ç–∫–∞ –∑ –∫–ª—ñ—Ç–∏–Ω–∫–∞–º–∏ 32x32 –ø—ñ–∫—Å–µ–ª—ñ
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–ª—è —Ä–æ–∑–º—ñ—â–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ –Ω–∞ –ø–æ–ª—ñ
- ‚úÖ –û—Å–Ω–æ–≤–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä—ñ–≤–Ω—ñ–≤ —Ç–∞ –ø–µ—Ä–µ—à–∫–æ–¥

## üöÄ –©–æ –¥–∞–ª—ñ?

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —É—Ä–æ—Ü—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ —Å–∏—Å—Ç–µ–º—É –ª–æ–≥—É–≤–∞–Ω–Ω—è, —è–∫–∞ –±—É–¥–µ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –≤—Å—ñ –ø–æ–¥—ñ—ó –≤ –≥—Ä—ñ.

**–¢–∏ –º–æ–ª–æ–¥–µ—Ü—å! üåü –ü—Ä–æ–¥–æ–≤–∂—É–π –≤ —Ç–æ–º—É –∂ –¥—É—Å—ñ!** 