# 3.7: –°—Ç—Ä—ñ–ª—å–±–∞ –≤–æ—Ä–æ–≥–∞

## –©–æ –º–∏ –±—É–¥–µ–º–æ —Ä–æ–±–∏—Ç–∏?

–£ —Ü—å–æ–º—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ –º–∏ –¥–æ–¥–∞–º–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —Å—Ç—Ä—ñ–ª—å–±–∏ –¥–æ –∫–ª–∞—Å—É `Enemy.js` –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –Ω–∞—Ü—ñ–ª—é–≤–∞–Ω–Ω—è–º –Ω–∞ –≥—Ä–∞–≤—Ü—è.

## –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–ª–∞—Å—É Enemy.js

–î–æ–¥–∞–π—Ç–µ –¥–æ –∫–ª–∞—Å—É `Enemy.js` –Ω–æ–≤—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏:

```javascript
// ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ ...

export class Enemy extends Tank {
    constructor(options = {}) {
        // ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ ...
        
        // –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä—ñ–ª—å–±–∏
        this.shooting = {
            canShoot: true,
            lastShotTime: 0,
            shootCooldown: 2000, // 2 —Å–µ–∫—É–Ω–¥–∏ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
            bullets: [], // –º–∞—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫—É–ª—å
            accuracy: 0.8 // —Ç–æ—á–Ω—ñ—Å—Ç—å —Å—Ç—Ä—ñ–ª—å–±–∏ (80%)
        };
        
        // ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ ...
    }
    
    // ... —ñ—Å–Ω—É—é—á—ñ –º–µ—Ç–æ–¥–∏ ...
    
    /**
     * –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –≤–æ—Ä–æ–≥–∞
     * @param {number} deltaTime - –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
     */
    update(deltaTime) {
        if (!this.isAlive) return;
        
        // –û–Ω–æ–≤–ª—é—î–º–æ —Ç–∞–π–º–µ—Ä–∏
        this.updateTimers(deltaTime);
        
        // –û–Ω–æ–≤–ª—é—î–º–æ AI
        this.updateAI(deltaTime);
        
        // –û–Ω–æ–≤–ª—é—î–º–æ —Ä—É—Ö
        this.updateMovement(deltaTime);
        
        // –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç—Ä—ñ–ª—å–±—É
        this.updateShooting(deltaTime);
        
        // –û–Ω–æ–≤–ª—é—î–º–æ –∫—É–ª—ñ
        this.updateBullets(deltaTime);
    }
    
    /**
     * –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Å—Ç—Ä—ñ–ª—å–±–∏
     * @param {number} deltaTime - –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
     */
    updateShooting(deltaTime) {
        // –û–Ω–æ–≤–ª—é—î–º–æ —á–∞—Å –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –ø–æ—Å—Ç—Ä—ñ–ª—É
        this.shooting.lastShotTime += deltaTime;
        
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –º–æ–∂–Ω–∞ —Å—Ç—Ä—ñ–ª—è—Ç–∏ –∑–Ω–æ–≤—É
        if (this.shooting.lastShotTime >= this.shooting.shootCooldown) {
            this.shooting.canShoot = true;
        }
        
        // –°—Ç—Ä—ñ–ª—è—î–º–æ —è–∫—â–æ –≤ —Ä–µ–∂–∏–º—ñ –∞—Ç–∞–∫–∏ —ñ —î —Ü—ñ–ª—å
        if (this.ai.state === 'attack' && 
            this.shooting.canShoot && 
            this.ai.chase.target) {
            this.shoot();
        }
    }
    
    /**
     * –°—Ç—Ä—ñ–ª—å–±–∞ –≤–æ—Ä–æ–≥–∞
     */
    shoot() {
        if (!this.ai.chase.target) return;
        
        // –û—Ç—Ä–∏–º—É—î–º–æ –ø–æ–∑–∏—Ü—ñ—é –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏
        const shootPos = this.getShootPosition();
        
        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –Ω–∞–ø—Ä—è–º–æ–∫ –¥–æ –≥—Ä–∞–≤—Ü—è
        const targetDirection = this.calculateTargetDirection();
        
        // –î–æ–¥–∞—î–º–æ –Ω–µ—Ç–æ—á–Ω—ñ—Å—Ç—å –¥–æ —Å—Ç—Ä—ñ–ª—å–±–∏
        const finalDirection = this.addShootingInaccuracy(targetDirection);
        
        // –Ü–º–ø–æ—Ä—Ç—É—î–º–æ –∫–ª–∞—Å Bullet
        import('./Bullet.js').then(module => {
            const { Bullet } = module;
            
            // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤—É –∫—É–ª—é
            const bullet = new Bullet({
                x: shootPos.x,
                y: shootPos.y,
                direction: finalDirection,
                owner: 'enemy',
                speed: 4 // —à–≤–∏–¥–∫—ñ—Å—Ç—å –∫—É–ª—ñ –≤–æ—Ä–æ–≥–∞ (–ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ –∑–∞ –≥—Ä–∞–≤—Ü—è)
            });
            
            // –î–æ–¥–∞—î–º–æ –∫—É–ª—é –¥–æ –º–∞—Å–∏–≤—É
            this.shooting.bullets.push(bullet);
            
            // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∑–∞—Ç—Ä–∏–º–∫—É –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
            this.shooting.canShoot = false;
            this.shooting.lastShotTime = 0;
            
            // –õ–æ–≥—É—î–º–æ —Å—Ç—Ä—ñ–ª—å–±—É
            logger.enemyAction('–í–æ—Ä–æ–≥ —Å—Ç—Ä—ñ–ª—è—î', `–Ω–∞–ø—Ä—è–º–æ–∫: ${finalDirection}`);
            
            console.log('üí• –í–æ—Ä–æ–≥ –≤–∏—Å—Ç—Ä—ñ–ª–∏–≤ –∫—É–ª—é:', bullet);
        });
    }
    
    /**
     * –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞–ø—Ä—è–º–∫—É –¥–æ —Ü—ñ–ª—ñ
     * @returns {string} - –ù–∞–ø—Ä—è–º–æ–∫ –¥–æ –≥—Ä–∞–≤—Ü—è
     */
    calculateTargetDirection() {
        if (!this.ai.chase.target) return this.direction;
        
        const target = this.ai.chase.target;
        const dx = target.x - this.x;
        const dy = target.y - this.y;
        
        // –í–∏–∑–Ω–∞—á–∞—î–º–æ –æ—Å–Ω–æ–≤–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫
        if (Math.abs(dx) > Math.abs(dy)) {
            return dx > 0 ? 'right' : 'left';
        } else {
            return dy > 0 ? 'down' : 'up';
        }
    }
    
    /**
     * –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ –¥–æ —Å—Ç—Ä—ñ–ª—å–±–∏
     * @param {string} direction - –ü–æ—á–∞—Ç–∫–æ–≤–∏–π –Ω–∞–ø—Ä—è–º–æ–∫
     * @returns {string} - –§—ñ–Ω–∞–ª—å–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫ –∑ –Ω–µ—Ç–æ—á–Ω—ñ—Å—Ç—é
     */
    addShootingInaccuracy(direction) {
        // –Ø–∫—â–æ —Ç–æ—á–Ω—ñ—Å—Ç—å 100%, –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ —Ç–æ—á–Ω–∏–π –Ω–∞–ø—Ä—è–º–æ–∫
        if (this.shooting.accuracy >= 1.0) {
            return direction;
        }
        
        // –®–∞–Ω—Å –Ω–µ—Ç–æ—á–Ω–æ—ó —Å—Ç—Ä—ñ–ª—å–±–∏
        if (Math.random() > this.shooting.accuracy) {
            const directions = ['up', 'down', 'left', 'right'];
            const randomDirection = directions[Math.floor(Math.random() * directions.length)];
            return randomDirection;
        }
        
        return direction;
    }
    
    /**
     * –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—É–ª—å –≤–æ—Ä–æ–≥–∞
     * @param {number} deltaTime - –ß–∞—Å –∑ –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
     */
    updateBullets(deltaTime) {
        // –û–Ω–æ–≤–ª—é—î–º–æ –≤—Å—ñ –∫—É–ª—ñ
        for (let i = this.shooting.bullets.length - 1; i >= 0; i--) {
            const bullet = this.shooting.bullets[i];
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –∫—É–ª—é
            bullet.update(deltaTime);
            
            // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –∫—É–ª—è –∞–∫—Ç–∏–≤–Ω–∞
            if (!bullet.isBulletActive()) {
                // –í–∏–¥–∞–ª—è—î–º–æ –Ω–µ–∞–∫—Ç–∏–≤–Ω—É –∫—É–ª—é
                this.shooting.bullets.splice(i, 1);
            }
        }
    }
    
    /**
     * –ú–∞–ª—é–≤–∞–Ω–Ω—è –∫—É–ª—å –≤–æ—Ä–æ–≥–∞
     * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
     */
    renderBullets(ctx) {
        // –ú–∞–ª—é—î–º–æ –≤—Å—ñ –∞–∫—Ç–∏–≤–Ω—ñ –∫—É–ª—ñ
        this.shooting.bullets.forEach(bullet => {
            bullet.render(ctx);
        });
    }
    
    /**
     * –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏
     * @returns {Object} - –ü–æ–∑–∏—Ü—ñ—è –∫—É–ª—ñ
     */
    getShootPosition() {
        const centerX = this.x + this.width / 2;
        const centerY = this.y + this.height / 2;
        
        // –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –ø–æ–∑–∏—Ü—ñ—é –∫—É–ª—ñ –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –Ω–∞–ø—Ä—è–º–∫—É
        switch (this.direction) {
            case 'up':
                return { x: centerX - 2, y: this.y - 4 };
            case 'down':
                return { x: centerX - 2, y: this.y + this.height };
            case 'left':
                return { x: this.x - 4, y: centerY - 2 };
            case 'right':
                return { x: this.x + this.width, y: centerY - 2 };
            default:
                return { x: centerX - 2, y: this.y - 4 };
        }
    }
    
    /**
     * –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫—É–ª—å –≤–æ—Ä–æ–≥–∞
     * @returns {Array} - –ú–∞—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫—É–ª—å
     */
    getBullets() {
        return [...this.shooting.bullets];
    }
    
    /**
     * –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫—É–ª—ñ
     * @param {Bullet} bullet - –ö—É–ª—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è
     */
    removeBullet(bullet) {
        const index = this.shooting.bullets.indexOf(bullet);
        if (index > -1) {
            this.shooting.bullets.splice(index, 1);
            bullet.destroy();
        }
    }
    
    /**
     * –û—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫—É–ª—å
     */
    clearBullets() {
        this.shooting.bullets.forEach(bullet => bullet.destroy());
        this.shooting.bullets = [];
    }
    
    /**
     * –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞—Ç—Ä–∏–º–∫–∏ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
     * @param {number} cooldown - –ó–∞—Ç—Ä–∏–º–∫–∞ –≤ –º—ñ–ª—ñ—Å–µ–∫—É–Ω–¥–∞—Ö
     */
    setShootCooldown(cooldown) {
        this.shooting.shootCooldown = cooldown;
    }
    
    /**
     * –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ —Å—Ç—Ä—ñ–ª—å–±–∏
     * @param {number} accuracy - –¢–æ—á–Ω—ñ—Å—Ç—å (0.0 - 1.0)
     */
    setShootingAccuracy(accuracy) {
        this.shooting.accuracy = Math.max(0.0, Math.min(1.0, accuracy));
    }
    
    /**
     * –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Å—Ç—Ä—ñ–ª—å–±—É
     * @returns {Object} - –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å—Ç—Ä—ñ–ª—å–±—É
     */
    getShootingInfo() {
        return {
            canShoot: this.shooting.canShoot,
            bulletsCount: this.shooting.bullets.length,
            cooldown: this.shooting.shootCooldown,
            accuracy: this.shooting.accuracy,
            lastShotTime: this.shooting.lastShotTime
        };
    }
}
```

## –û–Ω–æ–≤–ª–µ–Ω–Ω—è –º–µ—Ç–æ–¥—É render

–û–Ω–æ–≤—ñ—Ç—å –º–µ—Ç–æ–¥ `render` –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è –∫—É–ª—å:

```javascript
/**
 * –ú–∞–ª—é–≤–∞–Ω–Ω—è –≤–æ—Ä–æ–≥–∞ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ
 * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
 */
render(ctx) {
    // —è–∫—â–æ –≤–æ—Ä–æ–≥ –º–µ—Ä—Ç–≤–∏–π, –Ω–µ –º–∞–ª—é—î–º–æ
    if (!this.isAlive) return;
    
    // –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–∫–æ–ª—ñ—Ä, —Å—Ç–∏–ª—å —Ç–æ—â–æ)
    ctx.save();
    
    // –≤–∏–∫–ª–∏–∫–∞—î–º–æ –º–µ—Ç–æ–¥ render –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ –∫–ª–∞—Å—É
    super.render(ctx);
    
    // –º–∞–ª—é—î–º–æ —á–µ—Ä–≤–æ–Ω–∏–π —Ö—Ä–µ—Å—Ç–∏–∫
    this.drawEnemyMark(ctx);
    
    // –º–∞–ª—é—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞–Ω—É AI
    this.drawAIStateIndicator(ctx);
    
    // –º–∞–ª—é—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç—Ä—ñ–ª—å–±–∏ (—è–∫—â–æ –Ω–µ –º–æ–∂–µ —Å—Ç—Ä—ñ–ª—è—Ç–∏)
    if (!this.shooting.canShoot) {
        this.drawShootCooldownIndicator(ctx);
    }
    
    // –≤—ñ–¥–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç—É (–ø–æ–≤–µ—Ä—Ç–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
    ctx.restore();
    
    // –º–∞–ª—é—î–º–æ –∫—É–ª—ñ –æ–∫—Ä–µ–º–æ
    this.renderBullets(ctx);
}

/**
 * –ú–∞–ª—é–≤–∞–Ω–Ω—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞—Ç—Ä–∏–º–∫–∏ —Å—Ç—Ä—ñ–ª—å–±–∏
 * @param {CanvasRenderingContext2D} ctx - –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è
 */
drawShootCooldownIndicator(ctx) {
    // —Ç–µ–º–Ω–æ-—á–µ—Ä–≤–æ–Ω–∏–π –∫–æ–ª—ñ—Ä –¥–ª—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞—Ç—Ä–∏–º–∫–∏
    ctx.fillStyle = '#c0392b';
    // —Ä–æ–∑–º—ñ—Ä —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
    const indicatorSize = 3;
    
    // —Ä–æ–∑–º—ñ—â—É—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤ –ª—ñ–≤–æ–º—É –≤–µ—Ä—Ö–Ω—å–æ–º—É –∫—É—Ç—ñ —Ç–∞–Ω–∫–∞
    const indicatorX = this.x + 2;
    const indicatorY = this.y + 2;
    
    // –º–∞–ª—é—î–º–æ –º–∞–ª–µ–Ω—å–∫–∏–π –∫–≤–∞–¥—Ä–∞—Ç
    ctx.fillRect(indicatorX, indicatorY, indicatorSize, indicatorSize);
}
```

## –©–æ –¥–æ–¥–∞–Ω–æ –¥–æ –∫–ª–∞—Å—É Enemy?

### –ù–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:
- **`shooting.canShoot`** - —á–∏ –º–æ–∂–µ –≤–æ—Ä–æ–≥ —Å—Ç—Ä—ñ–ª—è—Ç–∏
- **`shooting.lastShotTime`** - —á–∞—Å –æ—Å—Ç–∞–Ω–Ω—å–æ–≥–æ –ø–æ—Å—Ç—Ä—ñ–ª—É
- **`shooting.shootCooldown`** - –∑–∞—Ç—Ä–∏–º–∫–∞ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏ (2 —Å–µ–∫—É–Ω–¥–∏)
- **`shooting.bullets`** - –º–∞—Å–∏–≤ –∞–∫—Ç–∏–≤–Ω–∏—Ö –∫—É–ª—å
- **`shooting.accuracy`** - —Ç–æ—á–Ω—ñ—Å—Ç—å —Å—Ç—Ä—ñ–ª—å–±–∏ (80%)

### –ù–æ–≤—ñ –º–µ—Ç–æ–¥–∏:
- **`updateShooting()`** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏ —Å—Ç—Ä—ñ–ª—å–±–∏
- **`shoot()`** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ—ó –∫—É–ª—ñ
- **`calculateTargetDirection()`** - —Ä–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞–ø—Ä—è–º–∫—É –¥–æ —Ü—ñ–ª—ñ
- **`addShootingInaccuracy()`** - –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ
- **`updateBullets()`** - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –∫—É–ª—å
- **`renderBullets()`** - –º–∞–ª—é–≤–∞–Ω–Ω—è –∫—É–ª—å
- **`getShootPosition()`** - –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø–æ–∑–∏—Ü—ñ—ó –¥–ª—è —Å—Ç—Ä—ñ–ª—å–±–∏
- **`setShootingAccuracy()`** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ
- **`drawShootCooldownIndicator()`** - —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞—Ç—Ä–∏–º–∫–∏

## –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä—ñ–ª—å–±–∏ –≤–æ—Ä–æ–≥–∞

### –£–º–æ–≤–∏ —Å—Ç—Ä—ñ–ª—å–±–∏:
- **–†–µ–∂–∏–º –∞—Ç–∞–∫–∏** (`ai.state === 'attack'`)
- **–ú–æ–∂–Ω–∞ —Å—Ç—Ä—ñ–ª—è—Ç–∏** (`canShoot === true`)
- **–Ñ —Ü—ñ–ª—å** (`ai.chase.target`)

### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞—Ü—ñ–ª—é–≤–∞–Ω–Ω—è** –Ω–∞ –≥—Ä–∞–≤—Ü—è
- **–°–∏—Å—Ç–µ–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—ñ** (80% –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- **–ó–∞—Ç—Ä–∏–º–∫–∞ 2 —Å–µ–∫—É–Ω–¥–∏** –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
- **–®–≤–∏–¥–∫—ñ—Å—Ç—å –∫—É–ª—ñ** 4 –ø—ñ–∫—Å–µ–ª—ñ –∑–∞ –∫–∞–¥—Ä

## –°–∏—Å—Ç–µ–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—ñ

### –†–æ–∑—Ä–∞—Ö—É–Ω–æ–∫ –Ω–∞–ø—Ä—è–º–∫—É:
1. **–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–º–∫—É** –¥–æ –≥—Ä–∞–≤—Ü—è
2. **–î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–µ—Ç–æ—á–Ω–æ—Å—Ç—ñ** –∑–≥—ñ–¥–Ω–æ –∑ `accuracy`
3. **–í–∏–ø–∞–¥–∫–æ–≤–∏–π –Ω–∞–ø—Ä—è–º–æ–∫** –ø—Ä–∏ –Ω–µ—Ç–æ—á–Ω—ñ–π —Å—Ç—Ä—ñ–ª—å–±—ñ

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ:
- **1.0** - 100% —Ç–æ—á–Ω—ñ—Å—Ç—å
- **0.8** - 80% —Ç–æ—á–Ω—ñ—Å—Ç—å (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
- **0.5** - 50% —Ç–æ—á–Ω—ñ—Å—Ç—å
- **0.0** - –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–ø–∞–¥–∫–æ–≤–∞ —Å—Ç—Ä—ñ–ª—å–±–∞

## –í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

### –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞—Ç—Ä–∏–º–∫–∏ —Å—Ç—Ä—ñ–ª—å–±–∏:
- **–¢–µ–º–Ω–æ-—á–µ—Ä–≤–æ–Ω–∏–π –∫–≤–∞–¥—Ä–∞—Ç** –≤ –ª—ñ–≤–æ–º—É –≤–µ—Ä—Ö–Ω—å–æ–º—É –∫—É—Ç—ñ
- **–ü–æ–∫–∞–∑—É—î—Ç—å—Å—è** –∫–æ–ª–∏ –Ω–µ –º–æ–∂–Ω–∞ —Å—Ç—Ä—ñ–ª—è—Ç–∏

### –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤:
- **–ü—Ä–∞–≤–∏–π –≤–µ—Ä—Ö–Ω—ñ–π** - —Å—Ç–∞–Ω AI
- **–õ—ñ–≤–∏–π –≤–µ—Ä—Ö–Ω—ñ–π** - –∑–∞—Ç—Ä–∏–º–∫–∞ —Å—Ç—Ä—ñ–ª—å–±–∏

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```javascript
// –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–æ—Ä–æ–≥–∞
const enemy = new Enemy({
    x: 300,
    y: 200,
    color: '#e74c3c',
    size: 32
});

// –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ü—ñ–ª—ñ –¥–ª—è –ø–µ—Ä–µ—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è
enemy.setTarget(player);

// –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—Ç—Ä—ñ–ª—å–±–∏
enemy.setShootCooldown(1500); // 1.5 —Å–µ–∫—É–Ω–¥–∏ –º—ñ–∂ –ø–æ—Å—Ç—Ä—ñ–ª–∞–º–∏
enemy.setShootingAccuracy(0.9); // 90% —Ç–æ—á–Ω—ñ—Å—Ç—å

// –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤ —ñ–≥—Ä–æ–≤–æ–º—É —Ü–∏–∫–ª—ñ
enemy.update(deltaTime);

// –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ —Å—Ç—Ä—ñ–ª—å–±—É
const shootingInfo = enemy.getShootingInfo();
console.log('–ö—É–ª—å –≤–æ—Ä–æ–≥–∞:', shootingInfo.bulletsCount);

// –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫—É–ª—å –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∫–æ–ª—ñ–∑—ñ–π
const bullets = enemy.getBullets();
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ü—å–æ–≥–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É —É –≤–∞—Å –±—É–¥–µ:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ —Å—Ç—Ä—ñ–ª—å–±–∞ –≤–æ—Ä–æ–≥–∞
- ‚úÖ –ù–∞—Ü—ñ–ª—é–≤–∞–Ω–Ω—è –Ω–∞ –≥—Ä–∞–≤—Ü—è
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç–æ—á–Ω–æ—Å—Ç—ñ —Å—Ç—Ä—ñ–ª—å–±–∏
- ‚úÖ –í—ñ–∑—É–∞–ª—å–Ω—ñ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ —Å—Ç–∞–Ω—É
- ‚úÖ –ì–æ—Ç–æ–≤–Ω—ñ—Å—Ç—å –¥–ª—è —Å–∏—Å—Ç–µ–º–∏ –∫–æ–ª—ñ–∑—ñ–π

## –©–æ –¥–∞–ª—ñ?

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –ø—ñ–¥—Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ —Å–∏—Å—Ç–µ–º—É –∫–æ–ª—ñ–∑—ñ–π –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –∑—ñ—Ç–∫–Ω–µ–Ω—å –º—ñ–∂ –∫—É–ª—è–º–∏ —Ç–∞ —Ç–∞–Ω–∫–∞–º–∏. 